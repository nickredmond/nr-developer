function getSelectedAnswer(){var a=document.querySelector("input[name='nr-question']:checked"),b=null;if(a){var c=a.getAttribute("nr-answer");b=document.getElementById(c).innerHTML}return b}function getQuestion(){currentQuestion=questionBank.shift()}function getQuestionNumber(){return Math.abs(questionBank.length-QUIZ_LENGTH)}function queryQuestionsWithDifficulty(a,b,c){for(var d=a.filter(function(a){return a.difficulty===b}),e=[],f=0;f<c;f++){var g=Math.floor(Math.random()*d.length);e.push(d.splice(g,1)[0])}return e}function getFirstQuestion(){var a=jQuery.extend(!0,[],QUESTIONS),b=queryQuestionsWithDifficulty(a,"easy",8),c=queryQuestionsWithDifficulty(a,"medium",7),d=queryQuestionsWithDifficulty(a,"hard",6),e=queryQuestionsWithDifficulty(a,"expert",4);questionBank=[].concat(b,c,d,e),getQuestion()}function startTest(){getFirstQuestion(),fillQuestion(),document.getElementById("homepage-area").style.display="none",document.getElementById("finished-area").style.display="none",document.getElementById("question-area").style.display="block"}function finishTest(){$.post("/grade-quiz",JSON.stringify({answers:answers}),function(a){var b=a.mastery_score;console.log("DATA: "+JSON.stringify(a)),console.log("mastery: "+b);var c=document.getElementById("mastery-rank"),d=document.getElementById("percent-progress");d.setAttribute("aria-valuenow",b),d.style.width=b+"%",document.getElementById("percent-correct-label").innerHTML=b.toString();var e="progress-bar progress-bar-striped active",f="label",g="";b>=80?(e+=" progress-bar-success",f+=" label-success",g="Companion"):b>=50?(e+=" progress-bar-warning",f+=" label-warning",g="Friend"):(e+=" progress-bar-danger",f+=" label-danger",g="Associate"),d.className=e,c.className=f,c.innerHTML=g+" of Nick",answers=[],document.getElementById("question-area").style.display="none",document.getElementById("finished-area").style.display="block",window.scrollTo(0,0)})}function fillQuestion(){document.getElementById("question-title").innerHTML="Question #"+getQuestionNumber(),document.getElementById("question-text").innerHTML=currentQuestion.question_text,document.getElementById("possible-answer-1").innerHTML=currentQuestion.possible_answers[0],document.getElementById("possible-answer-2").innerHTML=currentQuestion.possible_answers[1],document.getElementById("possible-answer-3").innerHTML=currentQuestion.possible_answers[2],document.getElementById("possible-answer-4").innerHTML=currentQuestion.possible_answers[3]}function getNextQuestion(a){var b=currentQuestion.question_id,c=currentQuestion.possible_answers.indexOf(a);answers.push({key:b,value:c}),getQuestionNumber()>=QUIZ_LENGTH?finishTest():(getQuestion(),fillQuestion())}function onAnswerSubmit(){var a=getSelectedAnswer();a?(document.getElementById("no-answer-alert").style.display="none",getNextQuestion(a)):document.getElementById("no-answer-alert").style.display="block"}var currentQuestion=null,questionBank=null,answers=[];